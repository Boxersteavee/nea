---
const apiUrl = new URL('/api/config/name', Astro.url);
const response = await fetch(apiUrl);
const data = await response.json();
const name = data.name;
---
<link rel="stylesheet" href="/css/style.css">
<div class="container">
    <h1 class="title">{name}</h1>
    <img src="/images/logo.svg" alt="Logo" class="logo">
    <div class="form">
        <button onclick="window.location.href='/login'">Login!</button>
        <button onclick="window.location.href='/register'">Register!</button>
    </div>
</div>

<script>
    async function checkSession() {
        try {
            const response = await fetch('/api/checksession', {
                credentials: 'include'
            });
            if (response.status === 200) {
                window.location.href = '/home';
            }
        } catch (error) {
            // No valid session, stay on page
        }
    }

    checkSession();
</script>